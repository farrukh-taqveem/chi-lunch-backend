(this["webpackJsonpchi-lunch-frontend"]=this["webpackJsonpchi-lunch-frontend"]||[]).push([[0],{125:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(0),c=a.n(s),i=a(14),r=a.n(i),o=a(15),l=a(16),u=a(18),d=a(17),j=a(19),m=a(6),p=a(57),h=a(20),b=a.n(h),f=a(48),v=a(27),O=a(21),y=a(49),x=a(50),g=a(32),N=a(51),S=a(28),B=a(52),k=a.n(B).a.create({baseURL:"/api"}),C=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getUsers=Object(v.a)(b.a.mark((function e(){var t,a,s,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("user");case 2:if(200===(t=e.sent).status){a=Object(f.a)(t.data.data);try{for(a.s();!(s=a.n()).done;)(c=s.value).fullName=c.firstName+" "+c.lastName}catch(r){a.e(r)}finally{a.f()}i=t.data.data.filter((function(e){return"Regular"===e.type})),n.setState({userList:t.data.data,selectedUsers:i})}case 4:case"end":return e.stop()}}),e)}))),n.addPayment=function(){var e={amount:0,paidBy:null};n.setState((function(t){return{payments:[].concat(Object(p.a)(t.payments),[e])}}))},n.removePayment=function(e){var t=n.state.payments.filter((function(t,a){return a!==e}));n.setState((function(e){return{payments:t}}))},n.changeAmount=function(e,t){var a=n.state.payments;a[t].amount=e.target.value,n.setState((function(e){return{payments:a}}))},n.payerUpdate=function(e,t){var a=n.state.payments;a[t].paidBy=e.target.value,n.setState((function(e){return{payments:a}}))},n.onSave=function(){var e=n.state.selectedUsers.map((function(e){return e._id})),t=n.state.cost,a=n.state.verificationKey,s=n.state.payments.filter((function(e){return null!=e.paidBy})).map((function(e){return{amount:e.amount,paidBy:e.paidBy._id}}));k.post("meal",{members:e,cost:t,payments:s,verificationKey:a}).then((function(e){n.toast.show({severity:"success",summary:"Success",detail:"Record Added"})})).catch((function(e){n.toast.show({severity:"error",summary:"Error",detail:"Request Failed"})}))},n.state={selectedUsers:null,userList:[],cost:0,verificationKey:"c",payments:[{amount:0,paidBy:null}]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getUsers()}},{key:"render",value:function(){var e=this,t=this.state.payments.length||0;return Object(n.jsxs)("div",{className:"p-grid",children:[Object(n.jsxs)("div",{className:"p-col-12 p-md-4",children:[Object(n.jsx)("h4",{children:"Select Participants"}),Object(n.jsx)(x.ListBox,{value:this.state.selectedUsers,options:this.state.userList,onChange:function(t){return e.setState({selectedUsers:t.value})},multiple:!0,filter:!0,optionLabel:"fullName",listStyle:{maxHeight:"40vh"}})]}),Object(n.jsxs)("div",{className:"p-col-12 p-md-8",children:[Object(n.jsx)("h4",{children:"Payment Details"}),Object(n.jsxs)("div",{className:"p-field",children:[Object(n.jsx)("label",{htmlFor:"cost",children:"Cost:\xa0"}),Object(n.jsx)(g.InputNumber,{id:"cost",size:12,value:this.state.cost,onValueChange:function(t){return e.setState({cost:t.value})}})]}),Object(n.jsxs)("div",{className:"p-grid",children:[Object(n.jsx)("div",{className:"p-col-6",children:"Participant"}),Object(n.jsx)("div",{className:"p-col-4",children:"Paid"})]}),this.state.payments.map((function(a,s){return Object(n.jsxs)("div",{className:"p-grid",children:[Object(n.jsxs)("div",{className:"p-col-6",children:[" ",Object(n.jsx)(y.Dropdown,{value:a.paidBy,options:e.state.userList,onChange:function(t){return e.payerUpdate(t,s)},optionLabel:"fullName",placeholder:"Select Participant"})]}),Object(n.jsxs)("div",{className:"p-col-4",children:[" ",Object(n.jsx)("div",{className:"p-field",children:Object(n.jsx)(g.InputNumber,{id:"paid",value:a.amount,size:5,onValueChange:function(t){return e.changeAmount(t,s)}})})]}),Object(n.jsx)("div",{className:"p-col-2",children:Object(n.jsx)(O.Button,{className:s===t-1?"":"p-button-danger",onClick:function(){s===t-1?e.addPayment():e.removePayment(s)},icon:"pi pi-".concat(s===t-1?"plus":"minus")})})]},"payment-".concat(s))})),Object(n.jsxs)("div",{className:"p-d-flex p-jc-between p-ai-center",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{htmlFor:"verificationKey",children:"Key:\xa0"}),Object(n.jsx)(N.InputText,{id:"verificationKey",type:"password",size:12,value:this.state.verificationKey,onValueChange:function(t){return e.setState({verificationKey:t.value})}})]}),Object(n.jsx)(O.Button,{className:"",onClick:this.onSave,icon:"pi pi-check",label:"Save"})]}),Object(n.jsx)(S.Toast,{ref:function(t){return e.toast=t}})]})]})}}]),a}(s.Component),w=a(53),D=a(54),P=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getMealSummary=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.get("meal/summary").then((function(e){console.log(e.data.data),n.setState({mealData:e.data.data})})).catch((function(e){n.toast.show({severity:"error",summary:"Error",detail:"Request Failed"})}));case 1:case"end":return e.stop()}}),e)}))),n.state={mealData:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getMealSummary()}},{key:"render",value:function(){var e=this,t=[{field:"fullName",header:"Name"},{field:"pending",header:"Total Bill"},{field:"paid",header:"Total Paid"},{field:"net",header:"Net Amount"}].map((function(e,t){return Object(n.jsx)(D.Column,{field:e.field,header:e.header},e.field)}));return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"card",children:Object(n.jsx)(w.DataTable,{value:this.state.mealData,children:t})}),Object(n.jsx)(S.Toast,{ref:function(t){return e.toast=t}})]})}}]),a}(s.Component),U=a(55),K=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)(j.b,{style:{textDecoration:"none"},to:"",children:Object(n.jsx)(O.Button,{label:"Home",icon:"pi pi-home",className:"p-mr-2"})})}),t=Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)(j.b,{style:{textDecoration:"none"},to:"summary",children:Object(n.jsx)(O.Button,{label:"Summary",icon:"pi pi-pencil",className:"p-mr-2"})})});return Object(n.jsx)("div",{children:Object(n.jsx)(U.Toolbar,{left:e,right:t})})}}]),a}(s.Component),L=Object(m.e)(K),T=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)(j.a,{children:[Object(n.jsx)(L,{}),Object(n.jsx)(m.a,{exact:!0,path:"/",component:C}),Object(n.jsx)(m.a,{exact:!0,path:"/summary",component:P})]})}}]),a}(s.Component);a(121),a(122),a(123),a(124);r.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(T,{})}),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.9890a743.chunk.js.map